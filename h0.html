<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Pre-Exam Motivation Page</title>

        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
        />

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                margin: 0;
                font-family: "Poppins", sans-serif;
                background: url("./tes.webp") no-repeat center center fixed;
                background-size: cover;
                overflow: hidden;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                color: #fff;
            }

            #particles-js {
                position: absolute;
                width: 100%;
                height: 100%;
                z-index: 1;
            }

            .overlay {
                background: rgba(0, 0, 0, 0.6);
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 2;
            }

            .motivational-box {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                padding: 30px 40px;
                border-radius: 20px;
                text-align: center;
                max-width: 600px;
                margin: 20px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.1);
                transform: translateY(-20px);
            }

            .motivational-box h2 {
                font-size: 2.5em;
                margin-bottom: 15px;
                background: linear-gradient(45deg, #fff, #e0e0e0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                font-weight: 700;
            }

            .motivational-box p {
                font-size: 1.3em;
                line-height: 1.6;
                margin-bottom: 20px;
                color: rgba(255, 255, 255, 0.9);
            }

            .exam-button {
                background: linear-gradient(45deg, #4e54c8, #8f94fb);
                color: #fff;
                padding: 18px 40px;
                border-radius: 50px;
                margin-top: 30px;
                font-size: 20px;
                border: none;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
                box-shadow: 0 6px 20px rgba(78, 84, 200, 0.3);
            }

            .exam-button:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(78, 84, 200, 0.4);
            }

            .exam-button:active {
                transform: translateY(1px);
            }

            .exam-button::before {
                content: "";
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    120deg,
                    transparent,
                    rgba(255, 255, 255, 0.2),
                    transparent
                );
                transition: 0.5s;
            }

            .exam-button:hover::before {
                left: 100%;
            }

            .rules {
                margin-top: 20px;
                font-size: 0.9em;
                color: rgba(255, 255, 255, 0.7);
            }

            .session-info {
                margin-top: 15px;
                padding: 10px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                font-size: 0.9em;
            }

            @media (max-width: 768px) {
                .motivational-box {
                    margin: 20px;
                    padding: 20px;
                }

                .motivational-box h2 {
                    font-size: 2em;
                }

                .motivational-box p {
                    font-size: 1.1em;
                }

                .exam-button {
                    padding: 15px 30px;
                    font-size: 18px;
                }
            }
        </style>
    </head>
    <body>
        <div id="particles-js"></div>

        <div class="overlay">
            <div
                id="content-box"
                class="motivational-box animate__animated animate__fadeInDown"
            >
                <!-- Content will be dynamically inserted here -->
            </div>
            <button
                id="exam-button"
                class="exam-button animate__animated animate__fadeInUp"
                onclick="startExam()"
                style="display: none"
            >
                Go to Exam Portal
            </button>
        </div>

        <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
        <script>
            // Particle.js Configuration
            particlesJS("particles-js", {
                particles: {
                    number: {
                        value: 100,
                        density: { enable: true, value_area: 800 },
                    },
                    color: { value: "#ffffff" },
                    shape: {
                        type: "circle",
                        stroke: { width: 0, color: "#000000" },
                        polygon: { nb_sides: 5 },
                    },
                    opacity: {
                        value: 0.3,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false,
                        },
                    },
                    size: {
                        value: 3,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 2,
                            size_min: 0.1,
                            sync: false,
                        },
                    },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#ffffff",
                        opacity: 0.2,
                        width: 1,
                    },
                    move: {
                        enable: true,
                        speed: 2,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: { enable: false, rotateX: 600, rotateY: 1200 },
                    },
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "bubble" },
                        onclick: { enable: true, mode: "push" },
                        resize: true,
                    },
                    modes: {
                        bubble: {
                            distance: 200,
                            size: 4,
                            duration: 2,
                            opacity: 0.8,
                            speed: 3,
                        },
                        push: { particles_nb: 4 },
                    },
                },
                retina_detect: true,
            });

            // Function to format date
            function formatDateTime(dateString) {
                const options = {
                    weekday: "long",
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                    hour: "2-digit",
                    minute: "2-digit",
                };
                return new Date(dateString).toLocaleDateString(
                    "id-ID",
                    options,
                );
            }

            // Check exam session status
            async function checkExamSession() {
                try {
                    console.log("Checking exam session...");
                    const response = await fetch("/sessions.json", {
                        headers: { "Content-Type": "application/json" },
                    });
                    if (!response.ok) {
                        throw new Error(
                            `HTTP error! status: ${response.status}`,
                        );
                    }
                    const data = await response.json();
                    console.log("Loaded session data:", data);

                    const now = new Date().getTime();
                    const currentSession = data.sessions.find((session) => {
                        const startTime = new Date(session.startTime).getTime();
                        const endTime = new Date(session.endTime).getTime();
                        return now >= startTime && now <= endTime;
                    });

                    const contentBox = document.getElementById("content-box");
                    const examButton = document.getElementById("exam-button");

                    if (currentSession) {
                        console.log(
                            "Found active session:",
                            currentSession.name,
                        );
                        contentBox.innerHTML = `
                            <h2>Ready for Excellence!</h2>
                            <p>"Honesty is the mirror of true success. Give your best effort and let the results speak for themselves."</p>
                            <p class="session-info">Session: ${currentSession.name}</p>
                            <p class="session-info">Start Time: ${formatDateTime(currentSession.startTime)}</p>
                            <p class="session-info">End Time: ${formatDateTime(currentSession.endTime)}</p>
                        `;
                        examButton.style.display = "block"; // Show the exam portal button
                    } else {
                        contentBox.innerHTML = `
                            <h2>Stay Tuned!</h2>
                            <p>The exam session is not yet available. Please check back later.</p>
                        `;
                    }
                } catch (error) {
                    console.error("Error fetching session data:", error);
                    document.getElementById("content-box").innerHTML = `
                        <h2>Something Went Wrong</h2>
                        <p>Unable to load exam session details. Please try again later.</p>
                    `;
                }
            }

            // Start Exam function
            function startExam() {
                window.location.href = "https://74poo200dx2.alabidin.id/"; // Redirect to the exam portal
            }

            // Load the session data and check the exam session when the page loads
            checkExamSession();
        </script>
    </body>
</html>
